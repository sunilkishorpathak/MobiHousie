<!DOCTYPE html>
<html>
    <head> <title> Diwali Tickets </title></head>  

    <link rel="stylesheet" type="text/css" href="ticket.css">

    <script>
        //document.write("Hello world");
        var diwaliItems = [
            "FullJhadi",
            "Anar",
            "Bomb",
            "Rocket",
            "Laddoo",
            "Barfi",
            "Gulab Jamun",
            "Rasmalai",
            "Ganesh",
            "Laxmi",
            "Diya",
            "Bati",
            "Toran",
            "Flowers",
            "Agarbati",
            "Gift",
            "Light",
            "Dhoop",
            "Ram",
            "Siya",
            "Hanuma",
            "Ravan",
            "Jalebi",
            "Kaju",
            "Badam",
            "Kismis",
            "Apple",
            "Banana",
            "Grapes",
            "Pears",
            "Candle"

        ];
        var LASTINDEX = 31;

        function fullTicket() {
            document.write("<br/>******************* FULL ITEMS **********************<br/>")
            document.write("<p style=\"font-size:24px;padding-left: 3cm\">");
            for (var i = 0; i < LASTINDEX; ++i) {
                document.write("<br/>");
                document.write(diwaliItems[i]);
            }
            document.write("</p>");
        }

        //ticket in tabular format
        function singleTabularTicket(ticketno) {
        }

        //fill dinner
        function populateDinner(num1, num2, num3, num4, num5, tableid) {
            var tempArray = [
                [0, 0, 0],
                [0, 0, 0],
                [0, 0, 0]
            ];
            var tempArgArray = [num1, num2, num3, num4, num5];

            //go for each row and set one number in that, with other constraint
            for (var i=0; i < 3; ++i) {
                var colArray = [0, 1, 2];
                var j = 3;
                while (true) {
                    var ranColumn = Math.floor(Math.random() * j);
                    //swap this index in colArray
                    var temp = colArray[ranColumn];
                    colArray[ranColumn] = colArray[j-1];
                    colArray[j-1] = temp;

                    //the column shouldn't have any other element
                    if ((tempArray[0][ranColumn] == 0) && (tempArray[1][ranColumn] == 0) && (tempArray[2][ranColumn] == 0)) {
                        tempArray[i][ranColumn] = tempArgArray[i];

                        break;
                    }
                    j = j - 1;
                    if (j == 0) break;
                }
            }
            //put other zero, one or two numbers at any place
            var totalNumPlaced = 3;
            var extraNumberCount = Math.floor(Math.random() * 3);
            if (extraNumberCount == 0) {
                extraNumberCount = 1;
            }

            for (var i = 0; i < extraNumberCount; ++i ) {
                while (true) {
                    var ranCol = Math.floor(Math.random() * 3);
                    var ranRow = Math.floor(Math.random() * 3);

                    if (tempArray[ranRow][ranCol] == 0) {
                        tempArray[ranRow][ranCol] = tempArgArray[totalNumPlaced];
                        totalNumPlaced = totalNumPlaced + 1;
                        break;
                    }
                }
            }
            //document.write("<br/>");
            //document.write(tempArray);

            //now set the values in table
            for (var i=0; i < 3; ++i) {
                for (var j=0; j < 3; ++j) {
                    if (tempArray[i][j] != 0 ){
                        var tablerow = document.getElementById(tableid).rows[i].cells;
                        tablerow[j+6].innerHTML = diwaliItems[tempArray[i][j]];
                    }
                }
            }
        }

        //fill lunch
        function populateLunch(num1, num2, num3, num4, num5, tableid) {
            var tempArray = [
                [0, 0, 0],
                [0, 0, 0],
                [0, 0, 0]
            ];
            var tempArgArray = [num1, num2, num3, num4, num5];

            //go for each row and set one number in that, with other constraint
            for (var i=0; i < 3; ++i) {
                var colArray = [0, 1, 2];
                var j = 3;
                while (true) {
                    var ranColumn = Math.floor(Math.random() * j);
                    //swap this index in colArray
                    var temp = colArray[ranColumn];
                    colArray[ranColumn] = colArray[j-1];
                    colArray[j-1] = temp;

                    //the column shouldn't have any other element
                    if ((tempArray[0][ranColumn] == 0) && (tempArray[1][ranColumn] == 0) && (tempArray[2][ranColumn] == 0)) {
                        tempArray[i][ranColumn] = tempArgArray[i];

                        break;
                    }
                    j = j - 1;
                    if (j == 0) break;
                }
            }
            //put other zero, one or two numbers at any place
            var totalNumPlaced = 3;
            var extraNumberCount = Math.floor(Math.random() * 3);
            if (extraNumberCount == 0) {
                extraNumberCount = 1;
            }

            for (var i = 0; i < extraNumberCount; ++i ) {
                while (true) {
                    var ranCol = Math.floor(Math.random() * 3);
                    var ranRow = Math.floor(Math.random() * 3);

                    if (tempArray[ranRow][ranCol] == 0) {
                        tempArray[ranRow][ranCol] = tempArgArray[totalNumPlaced];
                        totalNumPlaced = totalNumPlaced + 1;
                        break;
                    }
                }
            }
            //document.write("<br/>");
            //document.write(tempArray);

            //now set the values in table
            for (var i=0; i < 3; ++i) {
                for (var j=0; j < 3; ++j) {
                    if (tempArray[i][j] != 0 ){
                        var tablerow = document.getElementById(tableid).rows[i].cells;
                        tablerow[j+3].innerHTML = diwaliItems[tempArray[i][j]];
                    }
                }
            }

        }




        //fill breakfast only
        function populateBreakfast(num1, num2, num3, num4, num5, tableid) {
            var tempArray = [
                [0, 0, 0],
                [0, 0, 0],
                [0, 0, 0]
            ];
            var tempArgArray = [num1, num2, num3, num4, num5];

            //go for each row and set one number in that, with other constraint
            for (var i=0; i < 3; ++i) {
                var colArray = [0, 1, 2];
                var j = 3;
                while (true) {
                    var ranColumn = Math.floor(Math.random() * j);
                    //swap this index in colArray
                    var temp = colArray[ranColumn];
                    colArray[ranColumn] = colArray[j-1];
                    colArray[j-1] = temp;

                    //the column shouldn't have any other element
                    if ((tempArray[0][ranColumn] == 0) && (tempArray[1][ranColumn] == 0) && (tempArray[2][ranColumn] == 0)) {
                        tempArray[i][ranColumn] = tempArgArray[i];

                        break;
                    }
                    j = j - 1;
                    if (j == 0) break;
                }
            }
            //put other zero, one or two numbers at any place
            var totalNumPlaced = 3;
            var extraNumberCount = Math.floor(Math.random() * 3);
            if (extraNumberCount == 0) {
                extraNumberCount = 1;
            }

            for (var i = 0; i < extraNumberCount; ++i ) {
                while (true) {
                    var ranCol = Math.floor(Math.random() * 3);
                    var ranRow = Math.floor(Math.random() * 3);

                    if (tempArray[ranRow][ranCol] == 0) {
                        tempArray[ranRow][ranCol] = tempArgArray[totalNumPlaced];
                        totalNumPlaced = totalNumPlaced + 1;
                        break;
                    }
                }
            }
            //document.write("<br/>");
            //document.write(tempArray);

            //now set the values in table
            for (var i=0; i < 3; ++i) {
                for (var j=0; j < 3; ++j) {
                    if (tempArray[i][j] != 0 ){
                        var tablerow = document.getElementById(tableid).rows[i].cells;
                        tablerow[j].innerHTML = diwaliItems[tempArray[i][j]];
                    }
                }
            }

        }


        //set ticket colors
        function setTicketColor(ticketid, color) {
            document.getElementById(ticketid).style.backgroundColor=color;
        }

        //populate table with random data in row and column
        function populateTable(tableid) {
            var itemSeq = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31];

            var lastIndex = LASTINDEX;
            var curLastIndex = LASTINDEX;

            //shuffle the above
            for (var i=0; i < LASTINDEX; ++i) {
                var randomNo = Math.floor(Math.random() * LASTINDEX);

                //swap number with currentLastIndex
                var temp = itemSeq[curLastIndex];
                itemSeq[curLastIndex] = itemSeq[randomNo];
                itemSeq[randomNo] = temp;

                curLastIndex = curLastIndex - 1;
            }

            /*
            while (curLastIndex <= lastIndex) {
                //divide the itemSeq[curLastIndex] with 3 to get the row index and with 9 to get the col index
                var rowIndex = itemSeq[curLastIndex] % 3;
                var colIndex = itemSeq[curLastIndex] % 9;

                //Get the row cells of the corresponding rowIndex
                var tablerow = document.getElementById(tableid).rows[rowIndex].cells;
                //tablerow[colIndex].innerHTML = diwaliItems[itemSeq[curLastIndex]];
                var sweetName = 'images/jalebi.jpg';
               // var tempName = "<img src=" + "images/jalebi.jpg" + "alt='hello'/>;"
               // tablerow[colIndex].innerHTML = "<img src=images/jalebi.jpg/>"
                 //   curLastIndex = curLastIndex + 1;
            }
            */
            populateBreakfast(itemSeq[5], itemSeq[7], itemSeq[9], itemSeq[11], itemSeq[13], tableid);
            populateLunch(itemSeq[2], itemSeq[4], itemSeq[6], itemSeq[16], itemSeq[18], tableid);
            populateDinner(itemSeq[4], itemSeq[8], itemSeq[12], itemSeq[17], itemSeq[19], tableid);
        }

        //Creating tickets
        function printTickets() {
            //store the id and there color
            var ticketIDs = ["TicketId01", "TicketId02", "TicketId03", "TicketId04", "TicketId05", "TicketId06", "TicketId07", "TicketId08", "TicketId09", "TicketId10"];
            var ticketColors = ["#e6faff", "#007a99", "#99ffbb", "#ffdd99", "#eeccff", "#d9d9d9", "#d9b3ff"];
            var COLORLASTINDEX = 7;
            for (var i = 0; i < 10; i++) {
                var colorIndex = Math.floor(Math.random() * COLORLASTINDEX);
                setTicketColor(ticketIDs[i], ticketColors[colorIndex]);
                populateTable(ticketIDs[i]);
            }
        }

    </script>

    <body face="courier, serif">
    <br/><br/><table id="TicketId01" align="center"><tr><td align="center";>--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr><tr><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr><tr><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr></table>
    <br/><br/><table id="TicketId02" align="center"><tr><td align="center";>--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr><tr><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr><tr><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr></table>
    <br/><br/><table id="TicketId03" align="center"><tr><td align="center";>--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr><tr><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr><tr><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr></table>
    <br/><br/><table id="TicketId04" align="center"><tr><td align="center";>--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr><tr><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr><tr><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr></table>
    <br/><br/><table id="TicketId05" align="center"><tr><td align="center";>--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr><tr><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr><tr><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr></table>
    <br/><br/><table id="TicketId06" align="center"><tr><td align="center";>--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr><tr><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr><tr><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr></table>
    <br/><br/><table id="TicketId07" align="center"><tr><td align="center";>--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr><tr><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr><tr><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr></table>
    <br/><br/><table id="TicketId08" align="center"><tr><td align="center";>--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr><tr><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr><tr><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr></table>
    <br/><br/><table id="TicketId09" align="center"><tr><td align="center";>--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr><tr><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr><tr><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr></table>
    <br/><br/><table id="TicketId10" align="center"><tr><td align="center";>--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr><tr><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr><tr><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td><td align="center">--</td></tr></table>



    <input type="button" onclick="printTickets()" value="ClickMe" />

    </body>
</html>